
基于视觉注意和支持向量机的舌体自动分割方法的探讨
*
刘哲
1
陈家旭
2#
赵宇明
1
苏群
1
徐晓新
1
周玉华
1
隋芯
1
刘哲，男，硕士，助理研究员
*#通信作者:陈家旭，男，博士，教授，主要研究方向:中医诊断研究，E-mail:chengjx@bucm．edu．cn
北京中医药大学创新团队项目(No．2011CXTD-07)
(1北京中医药大学信息中心
北京100029;2北京中医药大学基础医学院)
摘要:目的
探讨基于视觉注意机制和支持向量机(supportvectormachine，SVM)相结合的舌体自动
提取方法，为模式识别方法应用到舌体图像分割提供新思路。方法
将舌图像经过视觉特征提取、高
斯金字塔多尺度变换，依据多特征图合并策略生成显著图并进行二值化;在不需要人工干预的情况
下，从显著区和非显著区分别随机选取正类训练样本和负类训练样本;机器自动学习样本创建SVM
分类器，最后用训练好的SVM分类器对完整舌图像进行分割。结果
获得的正常舌、裂纹舌、齿痕舌
等多种舌象的分割效果良好，没有特征信息丢失的情况，并具有一定的抗噪能力。结论
基于视觉注
意和SVM舌体自动分割方法在无需任何先验知识的条件下，具有较稳定的分割效果，为模式识别应
用到舌体图像分割中作了初步探索。
关键词:舌图像分割;视觉注意;支持向量机;模式识别
中图分类号:R241．25
doi:10.3969/j.issn.1006-2157.2013.01.004
Automatictongueimagesegmentationbasedonvisualattentionand
supportvectormachine
*
LIUZhe
1，CHENJia-xu
2#，ZHAOYu-ming
1，SUQun
1，XUXiao-xin
1，ZHOUYu-hua
1，SUIXin
1
(1InformationCenter，BeijingUniversityofChineseMedicine，Beijing100029;2SchoolofPreclinical
Medicine，BeijingUniversityofChineseMedicine)
Abstract:Objective
ObjectiveToprobeintoautomaticextractivemethodoftongueimagesbasedonthe
combinationofvisualattentionmechanismandsupportvectormachine(SVM)，andofferanewthinking
trainforapplyingpatternrecognitionmethodintongueimagesegmentation．Methods
Aftervisual
featureextractionandGaussianpyramidmulti-scaletransformation，tongueimageswerecreatedto
saliencymapsandthengivenbinarizationaccordingtomulti-featuremergestrategy．Thepositivetraining
samplesandnegativetrainingsampleswererandomlyselectedfromsignificantandnon-significantareas
withoutmanualintervention，andSVMclassifierwasgeneratedthroughsampleautomaticlearning．
Finally，thetraininedSVMclassifierwasusedtosegmentcompletetongueimages．Results
This
methodhadgoodsegmentationeffectonnormaltongue，fissuredtongueandteeth-markedtongueand
anti-noiseability，andfeaturedatawasnotlost．Conclusion
Theautomaticsegmentationmethodof
tongueimagesbasedonvisualattentionandSVMhasastablesegmentationeffectintheconditionwithout
anyprioriknowledge，whichisaninitialexplorationtopatternrecognitionapplicationintongueimage
segmentation．
Keywords:tongueimagesegmentation;visualattention;supportvectormachine;patternrecognition
舌象分割技术根据舌体色彩信息和形态特征等
知识，充分利用区域内部像素的相似性和区域间像
素不连续性，将舌体从脸部背景区域中自动提取出
来，已经取得了很大的进展。许氏
［1］采用抗噪性能
18
JournalofBeijingUniversityofTraditionalChineseMedicine
第36卷第1期2013年1月
Vol．36
No．1
Jan．2013
较好的Sobel边缘算子对舌象提取。刘氏等
［2］提出
了一种基于亮度信息和形态特征的舌图像自动分割
方法，对绝大多数舌象获得了较好的结果。沈氏等
使用基于Calmull-rom样条函数的动态轮廓模型
［3］，
采用快速的局部优化Greedy算法对舌图像进行提
取，但是该方法自动性较差，不适合大样本以及临床
应用。由于采集的图像中脸部、舌体、嘴唇之间信息
的相似性及复杂性，至今还没有哪种自动分割算法
能对各类舌图像都取得理想的分割结果。基于视觉
注意机制的支持向量机(supportvectormachine，
SVM)舌体自动分割方法，充分利用视觉注意机制
方法的区域性信息，与具有很好泛化性能的SVM相
结合
［4］，对完整舌图像进行分割。
1
资料来源
通过互联网搜集各类采集好的舌图像，进行舌
图像大小规范化，筛选整理出包含正常舌、齿痕舌、
裂纹舌等多种类型的舌图像30例。
2
2．1方法与结果
采用视觉注意机制预处理舌图像
采集到的舌图像是一幅包含胡须、牙齿、嘴唇、
面部、舌体等多信息的图像。ITTI视觉注意模型
［5］
利用视觉注意机制对信息进行过滤和筛选，有效地
过滤胡须、牙齿、面部等信息，直接关注舌图像中的
舌体部分。具体步骤如下:
(1)选取亮度、颜色、方向特征。计算公式为:
亮度特征(I)
I=(r+g+b)/3
红色通道(R)
R=r－(g+b)/2
绿色通道(G)
G=g－(r+b)/2
蓝色通道(B)
B=b－(r+g)/2
黄色通道
Y=(r+g)/2－
r－g/2－b
方向特征
θ=0°、45°、90°、135°
(2)计算视觉特征图。将选取的亮度特征I，颜
色特征R、B、G、Y，方向特征θ产生9个尺度的高斯
金字塔。选取金字塔结构中的第1、2、3层为中央层
(c)，每一个中央层对应的周边层(s)为中央层的
层数加5和6，即当中央层取第1层时，对应的周边
层为第6层和第7层，以此类推。然后对像素较少
的周边层进行插值，将像素放大至与对应的中央层
像素一样，最后进行对应像素的相减操作。各个视
觉特征图计算如下:
设I(c，s)表示亮度特征图，则I(c，s)的计算公
式为:I(c，s)
=I(c)－I(s)
设RG(c，s)和BY(c，s)表示颜色特征图，其计
算公式为:
RG(c，s)
=
(R(c)－G(c))－(G(s)－R(s)
BY(c，s)
=
(B(c)－Y(c))－(Y(s)－B(s))
(3)二值化的显著图。将各级特征图归一化后
进行叠加，形成最终的显著图。见图1。
2．2
支持向量机SVM方法
长期以来，构造可以从经验中学习的机器是人
们的研究目标，针对小样本学习理论的SVM模式识
别方法成为研究热点。SVM主要构建了一个使两
类之间分隔达到最大化的超平面，利用该超平面分
类器对新数据进行分类。对N维实数空间R
n中的
M个训练样本线性可分的问题，实质是在样本特征
空间中寻找一个最优超平面w
Tx－γ=0，使得训练
样本正确分开，即求解问题:
min1
2||w||
2
满足D(Aw－eγ)+y≥e;y≥0
A是一个m×n数据矩阵，e是全为1的m×1
误差向量，D是m×n对角阵，其元素为+1或－1
(+1表示样本属于A+，－1表示样本属于A－)。
该问题是的一个典型的二次规划问题，可以通过采
用邻近支持向量机
［7］方法，将其转化为求解一个线
性方程组，利用拉格朗日对偶理论求解以下公式:
min1
2||y||
2+1
2(w
Tw+γ
2)
D(Aw－eγ)+y=e
y≥0
解得预测函数系数w和γ。最终预测函数为:
f(x)
=sign(w
Tx－γ)
对于非线性分类器，可将其输入向量经非线性
变换映射到另一个高维空间，使其线性可分。通过
核函数(常用的核函数有多项式积核、径向基核等)
变换到高维空间中寻找一个最优超平面，使其推广
能力最好，然后进行线性分类。
19
第1期
刘哲等
基于视觉注意和支持向量机的舌体自动分割方法的探讨
2．3
训练样本及特征提取
对舌图像预处理后可以得到显著区和非显著
区，在显著区随机选取10000个像素作为正类训练
样本，在非显著区随机选取10000个像素作为负类
训练样本，并将每个像素点的RGB3个分量特征作
为样本特征。
2．4
训练SVM分类器
选择多项式核函数K(x，y)
=(xy
T+1)
2对舌
体和背景进行分类，惩罚因子C取1。每次随机选
取的10000个正类样本和10000个负类样本，进行
10次样本训练，采用加权平均的方法确定最终w和
γ的值，得到预测函数。
w=∑
n
i=1
wi/nn=10
γ=∑
n
i=1γi/nn=10
2．5
分割结果
对待分割的彩色舌图像，利用确定的预测函数
进行分类预测，自动分割结果见图2。大多数舌体
分割结果比较令人满意，但部分结果存在少量噪声
和边缘信息损失的情况。
3
讨论
从采集到的舌图像中，将舌体从脸部背景区域
中自动提取出来，是舌诊数字化、客观化的重要步
骤，是进一步对舌体进行分析研究的重要前提。舌
体分割成为连接图像采集和图像处理与分析的重要
环节，其分割质量也将直接影响到后续舌象分析的
准确性。视觉注意是人类从外界输入的大量信息中
选择和保持有用信息，拒绝无用信息的意识活动。
视觉注意模型是一种类生物方法，它利用人类的视
觉注意机制计算图像中最显著的部分，并以称为显
著图的灰度图像表示。ITTI视觉注意模型通过底层
特征的提取，将多种特征、多种尺度的视觉空间通过
中央—周边算子得到的各个特征的显著性图合成一
幅显著图，并将它用于包含自然景物、交通等目标的
图像分析，取得了较好的结果。支持向量机分类器
是建立在人工标记训练样本基础上，机器自动学习
创建分类器进行分类的模式识别方法。将这两种方
法应用到舌图像自动分割结果可以看出，即使对于
有齿痕的、裂纹的、形状不规则的舌图像，都能做到
信息的不丢失。
基于ITTI视觉注意模型对采集到的大多数舌图
像都能获取较好的显著图，但对某些脸部、嘴唇和舌
体颜色非常相近的图像不能得到理想的显著图，导致
分割效果不好。针对噪声干扰问题，可以对预分割的
二值显著图进行灰度水平、垂直投影处理，利用舌体
区域红色通道像素集中的特点，过滤边缘噪声信息，
达到提高分割效果的作用。训练分类器的样本个数
也是决定分割结果的重要因素。样本个数太少，会使
分类器粗糙，分割结果噪声很大，部分背景区域不能
完全过滤;样本个数过多，会使分类器过于精确，部分
边缘信息又会丢失。针对这一问题，采用穷举搜索的
方法进行4个等级样本个数实验，最终确定训练样本
个数，尽可能的使分割结果达到最好。
利用视觉注意机制生成的显著图自动获取正类
和负类训练样本，采用支持向量机分类算法对舌图
像进行完整分割，取得了较好的效果。该方法在对
未知样本数据的识别中，具有更好的泛化能力。研
究为模式识别方法应用到舌体图像分割中作了初步
探索，为舌象的客观化、数字化研究提供了新思路。
